<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Crunchy Container Overview</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta><meta property="og:site_name" content="Crunchy Containers"></meta><meta property="og:title" content="Crunchy Container Overview"></meta><meta property="og:type" content="website"></meta><meta property="og:image:type" content="image/png"></meta><meta property="og:image" content="{[backrest-url-base]}/logo.svg"></meta><meta name="description" content="Crunchy Container Overview"></meta><meta property="og:description" content="Crunchy Container Overview"></meta><link rel="stylesheet" href="default.css" type="text/css"></link></head><body><div id="header-wrapper"><div class="page-header" id="page-header"><div class="page-header-logo"><img src="logo.svg"></div><div class="page-header-title">Crunchy Container Overview</div></div><div class="page-menu"><div class="menu-body"><div class="menu"><a class="menu-link" href="install.html">Home</a></div><div class="menu"><a class="menu-link" href="containers.html">Containers</a></div><div class="menu"><a class="menu-link" href="examples.html">Examples</a></div><div class="menu"><a class="menu-link" href="pitr.html">PITR</a></div><div class="menu"><a class="menu-link" href="dedicated.html">Dedicated</a></div><div class="menu"><a class="menu-link" href="backrest.html">Backup</a></div></div></div></div><div id="content-wrapper"><div id="sidebar-wrapper"><div id="sidebar"><div class="page-toc"><div class="page-toc-header"><div class="page-toc-title"></div></div><div class="page-toc-body"><div class="section1-toc"><div class="section1-toc-number">1</div><div class="section1-toc-title"><a href="#_introduction">Introduction</a></div></div><div class="section1-toc"><div class="section1-toc-number">2</div><div class="section1-toc-title"><a href="#_crunchy_postgres">crunchy-postgres</a></div><div class="section2-toc"><div class="section2-toc-number">2.1</div><div class="section2-toc-title"><a href="#_crunchy_postgres/_packages">Packages</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.2</div><div class="section2-toc-title"><a href="#_crunchy_postgres/_setup_sql">setup.sql</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.3</div><div class="section2-toc-title"><a href="#_crunchy_postgres/_environment_variables">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.4</div><div class="section2-toc-title"><a href="#_crunchy_postgres/_features">Features</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.5</div><div class="section2-toc-title"><a href="#_crunchy_postgres/_locale_support">Locale Support</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">3</div><div class="section1-toc-title"><a href="#_crunchy_postgres_gis">crunchy-postgres-gis</a></div></div><div class="section1-toc"><div class="section1-toc-number">4</div><div class="section1-toc-title"><a href="#_crunchy_backup">crunchy-backup</a></div><div class="section2-toc"><div class="section2-toc-number">4.1</div><div class="section2-toc-title"><a href="#_crunchy_backup/_backup_location">Backup Location</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.2</div><div class="section2-toc-title"><a href="#_crunchy_backup/_dependencies">Dependencies</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.3</div><div class="section2-toc-title"><a href="#_crunchy_backup/_environment_variables_2">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">5</div><div class="section1-toc-title"><a href="#_crunchy_dump">crunchy-dump</a></div><div class="section2-toc"><div class="section2-toc-number">5.1</div><div class="section2-toc-title"><a href="#_crunchy_dump/_dump_location">Dump Location</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.2</div><div class="section2-toc-title"><a href="#_crunchy_dump/_dependencies_2">Dependencies</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.3</div><div class="section2-toc-title"><a href="#_crunchy_dump/_environment_variables_3">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">6</div><div class="section1-toc-title"><a href="#_crunchy_collect">crunchy-collect</a></div><div class="section2-toc"><div class="section2-toc-number">6.1</div><div class="section2-toc-title"><a href="#_crunchy_collect/_description">Description</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.2</div><div class="section2-toc-title"><a href="#_crunchy_collect/_requirements">Requirements</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.3</div><div class="section2-toc-title"><a href="#_crunchy_collect/_environment_variables_4">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">7</div><div class="section1-toc-title"><a href="#_crunchy_prometheus">crunchy-prometheus</a></div><div class="section2-toc"><div class="section2-toc-number">7.1</div><div class="section2-toc-title"><a href="#_crunchy_prometheus/_description_2">Description</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.2</div><div class="section2-toc-title"><a href="#_crunchy_prometheus/_requirements_2">Requirements</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.3</div><div class="section2-toc-title"><a href="#_crunchy_prometheus/_environment_variables_5">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">8</div><div class="section1-toc-title"><a href="#_crunchy_promgateway">crunchy-promgateway</a></div><div class="section2-toc"><div class="section2-toc-number">8.1</div><div class="section2-toc-title"><a href="#_crunchy_promgateway/_description_3">Description</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.2</div><div class="section2-toc-title"><a href="#_crunchy_promgateway/_environment_variables_6">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">9</div><div class="section1-toc-title"><a href="#_crunchy_grafana">crunchy-grafana</a></div><div class="section2-toc"><div class="section2-toc-number">9.1</div><div class="section2-toc-title"><a href="#_crunchy_grafana/_description_4">Description</a></div></div><div class="section2-toc"><div class="section2-toc-number">9.2</div><div class="section2-toc-title"><a href="#_crunchy_grafana/_environment_variables_7">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">10</div><div class="section1-toc-title"><a href="#_crunchy_pgbadger">crunchy-pgbadger</a></div><div class="section2-toc"><div class="section2-toc-number">10.1</div><div class="section2-toc-title"><a href="#_crunchy_pgbadger/_environment_variables_8">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">10.2</div><div class="section2-toc-title"><a href="#_crunchy_pgbadger/_features_2">Features</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">11</div><div class="section1-toc-title"><a href="#_crunchy_pgpool">crunchy-pgpool</a></div><div class="section2-toc"><div class="section2-toc-number">11.1</div><div class="section2-toc-title"><a href="#_crunchy_pgpool/_environment_variables_9">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">11.2</div><div class="section2-toc-title"><a href="#_crunchy_pgpool/_features_3">Features</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">12</div><div class="section1-toc-title"><a href="#_crunchy_watch">crunchy-watch</a></div><div class="section2-toc"><div class="section2-toc-number">12.1</div><div class="section2-toc-title"><a href="#_crunchy_watch/_environment_variables_10">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">12.2</div><div class="section2-toc-title"><a href="#_crunchy_watch/_logic">Logic</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">13</div><div class="section1-toc-title"><a href="#_crunchy_vacuum">crunchy-vacuum</a></div><div class="section2-toc"><div class="section2-toc-number">13.1</div><div class="section2-toc-title"><a href="#_crunchy_vacuum/_description_5">Description</a></div></div><div class="section2-toc"><div class="section2-toc-number">13.2</div><div class="section2-toc-title"><a href="#_crunchy_vacuum/_environment_variables_11">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">14</div><div class="section1-toc-title"><a href="#_crunchy_dba">crunchy-dba</a></div><div class="section2-toc"><div class="section2-toc-number">14.1</div><div class="section2-toc-title"><a href="#_crunchy_dba/_environment_variables_12">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">14.2</div><div class="section2-toc-title"><a href="#_crunchy_dba/_cron_expression_format">CRON Expression Format</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">15</div><div class="section1-toc-title"><a href="#_crunchy_pgbouncer">crunchy-pgbouncer</a></div><div class="section2-toc"><div class="section2-toc-number">15.1</div><div class="section2-toc-title"><a href="#_crunchy_pgbouncer/_environment_variables_13">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">15.2</div><div class="section2-toc-title"><a href="#_crunchy_pgbouncer/_features_4">Features</a></div></div><div class="section2-toc"><div class="section2-toc-number">15.3</div><div class="section2-toc-title"><a href="#_crunchy_pgbouncer/_restrictions">Restrictions</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">16</div><div class="section1-toc-title"><a href="#_crunchy_backrest_restore">crunchy-backrest-restore</a></div><div class="section2-toc"><div class="section2-toc-number">16.1</div><div class="section2-toc-title"><a href="#_crunchy_backrest_restore/_environment_variables_14">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">16.2</div><div class="section2-toc-title"><a href="#_crunchy_backrest_restore/_features_5">Features</a></div></div><div class="section2-toc"><div class="section2-toc-number">16.3</div><div class="section2-toc-title"><a href="#_crunchy_backrest_restore/_restrictions_2">Restrictions</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">17</div><div class="section1-toc-title"><a href="#_crunchy_pgadmin4">crunchy-pgadmin4</a></div><div class="section2-toc"><div class="section2-toc-number">17.1</div><div class="section2-toc-title"><a href="#_crunchy_pgadmin4/_environment_variables_15">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">17.2</div><div class="section2-toc-title"><a href="#_crunchy_pgadmin4/_features_6">Features</a></div></div><div class="section2-toc"><div class="section2-toc-number">17.3</div><div class="section2-toc-title"><a href="#_crunchy_pgadmin4/_restrictions_3">Restrictions</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">18</div><div class="section1-toc-title"><a href="#_crunchy_restore">crunchy-restore</a></div><div class="section2-toc"><div class="section2-toc-number">18.1</div><div class="section2-toc-title"><a href="#_crunchy_restore/_dump_file_input_location">Dump-file Input Location</a></div></div><div class="section2-toc"><div class="section2-toc-number">18.2</div><div class="section2-toc-title"><a href="#_crunchy_restore/_dependencies_3">Dependencies</a></div></div><div class="section2-toc"><div class="section2-toc-number">18.3</div><div class="section2-toc-title"><a href="#_crunchy_restore/_environment_variables_16">Environment Variables</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">19</div><div class="section1-toc-title"><a href="#_crunchy_upgrade">crunchy-upgrade</a></div><div class="section2-toc"><div class="section2-toc-number">19.1</div><div class="section2-toc-title"><a href="#_crunchy_upgrade/_environment_variables_17">Environment Variables</a></div></div><div class="section2-toc"><div class="section2-toc-number">19.2</div><div class="section2-toc-title"><a href="#_crunchy_upgrade/_features_7">Features</a></div></div><div class="section2-toc"><div class="section2-toc-number">19.3</div><div class="section2-toc-title"><a href="#_crunchy_upgrade/_restrictions_4">Restrictions</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">20</div><div class="section1-toc-title"><a href="#_crunchy_sim">crunchy-sim</a></div></div><div class="section1-toc"><div class="section1-toc-number">21</div><div class="section1-toc-title"><a href="#_environment_variables_18">Environment Variables</a></div></div><div class="section1-toc"><div class="section1-toc-number">22</div><div class="section1-toc-title"><a href="#_features_8">Features</a></div></div><div class="section1-toc"><div class="section1-toc-number">23</div><div class="section1-toc-title"><a href="#_restrictions_5">Restrictions</a></div></div><div class="section1-toc"><div class="section1-toc-number">24</div><div class="section1-toc-title"><a href="#_legal_notices">Legal Notices</a></div></div></div></div></div></div><div id="page-wrapper"><div id="page-body"><div class="section1"><a id="_introduction"></a><div class="section1-header"><div class="section1-number">1</div><div class="section1-title">Introduction</div></div><div class="section-body"><div class="section-body-text">In this document, we will describe each of the containers found within the Crunchy Containers for PostgreSQL.</div><div class="section-body-text">The containers and their relationships to the overall architecture are depicted below:</div><pre class="code-block">|</pre></div></div><div class="section1"><a id="_crunchy_postgres"></a><div class="section1-header"><div class="section1-number">2</div><div class="section1-title">crunchy-postgres</div></div><div class="section-body"><div class="section-body-text">The crunchy-postgres container executes the Postgres database.</div><div class="section2"><a id="_crunchy_postgres/_packages"></a><div class="section2-header"><div class="section2-number">2.1</div><div class="section2-title">Packages</div></div><div class="section-body"><div class="section-body-text">The container image is built using either the Crunchy Postgres release or the community version based upon a flag in the Makefile.</div><div class="section-body-text">The crunchy-postgres RPMs are available to Crunchy customers only. The Crunchy release is meant for customers that require enterprise level support.</div><div class="section-body-text">The PGDG community RPMs can be used as well by simply commenting out the Crunchy yum repo within the Dockerfiles and uncommenting the PGDG yum repo.</div></div></div><div class="section2"><a id="_crunchy_postgres/_setup_sql"></a><div class="section2-header"><div class="section2-number">2.2</div><div class="section2-title">setup.sql</div></div><div class="section-body"><div class="section-body-text">The <b>setup.sql</b> script is used to define startup SQL commands that are executed when the database is first created.</div></div></div><div class="section2"><a id="_crunchy_postgres/_environment_variables"></a><div class="section2-header"><div class="section2-number">2.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PG_MODE - either <b>primary</b>, <b>replica</b> or <b>set</b>, this value determines whether the database is set up as a primary or replica instance. In the case of <b>set</b>, it means the container is started within a StatefulSet in a Kubernetes cluster.</li><li class="list-unordered">PG_PRIMARY_USER - the value to use for the user ID created as primaryuser. The <b>primaryuser</b> has super user privileges.</li><li class="list-unordered">PG_PRIMARY_PASSWORD - the password for the PG_PRIMARY_USER database user</li><li class="list-unordered">PG_USER - the value to use for the user ID created as a normal user. This user is created as part of the setup.sql script upon database creation and allows users to predefine an application user.</li><li class="list-unordered">PG_PASSWORD - the password for the PG_USER database user that is created</li><li class="list-unordered">PG_DATABASE - a database that is created upon database initialization</li><li class="list-unordered">PG_ROOT_PASSWORD - the PostgreSQL user password set up upon database initialization</li><li class="list-unordered">PG_LOCALE - if set, the locale you want to create the database with, if not set, the default locale is used</li><li class="list-unordered">SYNC_REPLICA - if set, this value is used to specify the application_name of a replica that will be used for a synchronous replication</li><li class="list-unordered">CHECKSUMS - if set, this value is used to enable the <b>--data-checksums</b> option when initdb is executed at initialization, if not set, the default is to <b>not</b> enable data checksums</li><li class="list-unordered">ARCHIVE_MODE - if set to <b>on</b>, will enable continuous WAL archiving by setting the value within the postgresql.conf file <b>archive_mode</b> setting, if not set, the default is <b>off</b></li><li class="list-unordered">ARCHIVE_TIMEOUT - if set to a number (in seconds) , will specify the postgresql.conf <b>archive_timeout</b> setting, if not set, the default value of <b>60</b> is used.</li><li class="list-unordered">PGAUDIT_ANALYZE - if set, will cause the container to also start the pgaudit_analyze program in the background</li><li class="list-unordered">PGDATA_PATH_OVERRIDE - if set, will cause the container to use a /pgdata path name of your choosing rather than the hostname of the container which is the default. This is useful for a primary in a deployment.</li><li class="list-unordered">XLOGDIR - if set to true, will cause initdb to include --xlogdir=$PGWAL, this will cause a symlink to be created from /pgdata/containername/pg_xlog to /pgwal/containername-wal</li><li class="list-unordered">TEMP_BUFFERS - default is 8MB, set this value to override this PostgreSQL configuration setting</li><li class="list-unordered">MAX_CONNECTIONS - default is 100, set this value to override this PostgreSQL configuration setting</li><li class="list-unordered">SHARED_BUFFERS - default is 128MB, set this value to override this PostgreSQL configuration setting</li><li class="list-unordered">WORK_MEM - default is 4MB, set this value to override this PostgreSQL configuration setting</li><li class="list-unordered">MAX_WAL_SENDERS - default is 6, set this value to override this PostgreSQL configuration setting</li><li class="list-unordered">ENABLE_SSHD- default is false, set this value to true to enable SSHD. See <a href="sshd.adoc">SSHD Documentation</a> for detailed setup instructions</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_postgres/_features"></a><div class="section2-header"><div class="section2-number">2.4</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-postgres container:</div><ul class="list-unordered"><li class="list-unordered">use of OpenShift secrets</li><li class="list-unordered">ability to restore from a database backup</li><li class="list-unordered">use of custom pg_hba.conf and postgresql.conf files</li><li class="list-unordered">ability to override postgresql.conf configuration parameters</li><li class="list-unordered">ability to override the default setup.sql script</li><li class="list-unordered">ability to set the database locale</li><li class="list-unordered">ability to specify a synchronous replica application_name</li><li class="list-unordered">ability to specify a recovery using PITR and WAL files, see pitr.adoc for a detailed design explanation of how PITR is implemented within the container suite</li><li class="list-unordered">ability to enable SSHD</li></ul></div></div><div class="section2"><a id="_crunchy_postgres/_locale_support"></a><div class="section2-header"><div class="section2-number">2.5</div><div class="section2-title">Locale Support</div></div><div class="section-body"><div class="section-body-text">Adding locale support to the container is accomplished by running <i>yum reinstall glibc_common</i> within the container, this increases the size of the container image and can be removed if you do not require specific locale support.</div><div class="section-body-text">You can specify the PG_LOCALE env var which is passed to the initdb command when the initial data files are created, for example:</div><pre class="code-block">"name": "PG_LOCALE",
"value": "fr_BE.UTF-8"</pre><div class="section-body-text">By default, no locale is specified when the initdb command is executed.</div></div></div></div></div><div class="section1"><a id="_crunchy_postgres_gis"></a><div class="section1-header"><div class="section1-number">3</div><div class="section1-title">crunchy-postgres-gis</div></div><div class="section-body"><div class="section-body-text">This container is the same as the crunchy-postgres container except that it includes the following PostgreSQL extensions:</div><ul class="list-unordered"><li class="list-unordered">postgis</li><li class="list-unordered">pl/r</li></ul><div class="section-body-text">You can test the pl/r extension by running the following commands for example:</div><pre class="code-block">create extension plr;
SELECT * FROM plr_environ();
SELECT load_r_typenames();
SELECT * FROM r_typenames();
SELECT plr_array_accum('{23,35}', 42);
CREATE OR REPLACE FUNCTION plr_array (text, text)
RETURNS text[]
AS '$libdir/plr','plr_array'
LANGUAGE 'c' WITH (isstrict);
select plr_array('hello','world');</pre></div></div><div class="section1"><a id="_crunchy_backup"></a><div class="section1-header"><div class="section1-number">4</div><div class="section1-title">crunchy-backup</div></div><div class="section-body"><div class="section-body-text">The crunchy-backup container executes a pg_basebackup against another database container. The backup is a full backup using the standard utility included with PostgreSQL, pg_basebackup.</div><div class="section2"><a id="_crunchy_backup/_backup_location"></a><div class="section2-header"><div class="section2-number">4.1</div><div class="section2-title">Backup Location</div></div><div class="section-body"><div class="section-body-text">Backups are stored in a mounted backup volume location, using the database host name plus <b>-backups</b> as a sub-directory, then followed by a unique backup directory based upon a date/timestamp. It is left to the user to perform database backup archives in this current version of the container. This backup location is referenced when performing a database restore.</div></div></div><div class="section2"><a id="_crunchy_backup/_dependencies"></a><div class="section2-header"><div class="section2-number">4.2</div><div class="section2-title">Dependencies</div></div><div class="section-body"><div class="section-body-text">The container is meant to be using a NFS or similar network file system to persist database backups.</div></div></div><div class="section2"><a id="_crunchy_backup/_environment_variables_2"></a><div class="section2-header"><div class="section2-number">4.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">BACKUP_LABEL - when set, will set the label of the backup, if not set the default label used is <b>crunchy-backup</b></li><li class="list-unordered">BACKUP_HOST - required, this is the database we will be doing the backup for</li><li class="list-unordered">BACKUP_USER - required, this is the database user we will be doing the backup with</li><li class="list-unordered">BACKUP_PASS - required, this is the database password we will be doing the backup with</li><li class="list-unordered">BACKUP_PORT - required, this is the database port we will be doing the backup with</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_dump"></a><div class="section1-header"><div class="section1-number">5</div><div class="section1-title">crunchy-dump</div></div><div class="section-body"><div class="section-body-text">The crunchy-dump container executes either a pg_dump or pg_dumpall against another Postgres database.</div><div class="section2"><a id="_crunchy_dump/_dump_location"></a><div class="section2-header"><div class="section2-number">5.1</div><div class="section2-title">Dump Location</div></div><div class="section-body"><div class="section-body-text">Dumps are stored in a mounted backup volume location, using the database host name plus <b>-dumps</b> as a sub-directory, then followed by a unique backup directory based upon a date/timestamp. It is left to the user to perform database dump archives in this current version of the container. This dump location is referenced when performing a database restore.</div></div></div><div class="section2"><a id="_crunchy_dump/_dependencies_2"></a><div class="section2-header"><div class="section2-number">5.2</div><div class="section2-title">Dependencies</div></div><div class="section-body"><div class="section-body-text">The container is meant to be using a NFS or similar network file system to persist database dumps.</div></div></div><div class="section2"><a id="_crunchy_dump/_environment_variables_3"></a><div class="section2-header"><div class="section2-number">5.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><div class="section3"><a id="_crunchy_dump/_environment_variables_3/_required_args"></a><div class="section3-header"><div class="section3-number">5.3.1</div><div class="section3-title">REQUIRED ARGS</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PGDUMP_DB database we are connecting to</li><li class="list-unordered">PGDUMP_HOST host we are connecting to</li><li class="list-unordered">PGDUMP_PASS pg user password we are connecting with</li><li class="list-unordered">PGDUMP_PORT pg port we are connecting to</li><li class="list-unordered">PGDUMP_USER pg user we are connecting with</li></ul></div></div><div class="section3"><a id="_crunchy_dump/_environment_variables_3/_optional_extended_args"></a><div class="section3-header"><div class="section3-number">5.3.2</div><div class="section3-title">OPTIONAL/EXTENDED ARGS</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PGDUMP_ALL option to run pg_dumpall instead of pg_dump (extra all databases of a cluster into a single script file)</li><li class="list-unordered">PGDUMP_BLOBS option to include large objects in the dump</li><li class="list-unordered">PGDUMP_CLEAN option to cleanly drop database objects prior to recreating them</li><li class="list-unordered">PGDUMP_COLUMNINSERTS option to dump data as INSERT commands with explicit column names</li><li class="list-unordered">PGDUMP_COMPRESSION option to specify the compression level to be applied to the output from pg_dump</li><li class="list-unordered">PGDUMP_CREATE option to begin pg_dump output with the commands to create the database itself</li><li class="list-unordered">PGDUMP_DATAONLY option to dump only the data (no schema)</li><li class="list-unordered">PGDUMP_DISABLETRIGGERS option to disable triggers when running a data-only dump</li><li class="list-unordered">PGDUMP_ENABLEROWSECURITY option to allow dumping content of tables with RLS turned on</li><li class="list-unordered">PGDUMP_ENCODING option to specify the character set encoding</li><li class="list-unordered">PGDUMP_EXCLUDEPRIVILEGES option to exclude commands which specify access privileges from the output by pg_dump</li><li class="list-unordered">PGDUMP_FILE option to send the output to the specified file</li><li class="list-unordered">PGDUMP_FORMAT option to select the output format (plain, custom, directory and tar)</li><li class="list-unordered">PGDUMP_INSERTS option to dump data as INSERT commands rather than COPY commands</li><li class="list-unordered">PGDUMP_LOCKWAITTIMEOUT option to specify the length of time to wait to acquire shared locks at the beginning of the dump</li><li class="list-unordered">PGDUMP_NOOWNER option to exclude commands that set table ownership from the output by pg_dump</li><li class="list-unordered">PGDUMP_MOTABLESPACES option to exclude tablespaces from being set in the output by pg_dump</li><li class="list-unordered">PGDUMP_NUMJOBS option to specify the number of jobs to run the dump in parallel</li><li class="list-unordered">PGDUMP_OIDS option to include object identifiers (OIDs) as part of the data for every table</li><li class="list-unordered">PGDUMP_QUOTEIDENTIFIERS option to force quoting of all identifiers</li><li class="list-unordered">PGDUMP_SCHEMA option to specify which schemas matched by the specified pattern are output by pg_dump</li><li class="list-unordered">PGDUMP_SCHEMASTOEXCLUDE option to specify schemas matched by the specified pattern should be excluded from the output by pg_dump</li><li class="list-unordered">PGDUMP_SCHEMAONLY option to dump the schema information only (no data)</li><li class="list-unordered">PGDUMP_SUPERUSER option to specify the superuser name to use when disabling triggers</li><li class="list-unordered">PGDUMP_TABLE option to specify which tables matched by the specified pattern are output by pg_dump</li><li class="list-unordered">PGDUMP_TABLESTOEXCLUDE option to specify which tables matched by the specified pattern should be excluded from the output by pg_dump</li><li class="list-unordered">PGDUMP_VERBOSE option to specify verbose mode to output detailed object comments and start/stop times to the output by pg_dump; as well as progress messages to standard error (STDERR)</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div></div></div><div class="section1"><a id="_crunchy_collect"></a><div class="section1-header"><div class="section1-number">6</div><div class="section1-title">crunchy-collect</div></div><div class="section-body"><div class="section2"><a id="_crunchy_collect/_description"></a><div class="section2-header"><div class="section2-number">6.1</div><div class="section2-title">Description</div></div><div class="section-body"><div class="section-body-text">70 different PostgreSQL metrics are collected by the crunchy-collect container, which executes both the postgres_exporter and node_exporter. Written in Go, these are both metrics exporters that work with Prometheus to provide PostgreSQL server metrics in addition to hardware and OS metrics. The crunchy-collect container gathers different metrics from the crunchy-postgres PostgreSQL database container and pushes these to the Prometheus Promgateway (crunchy-promgateway).</div><div class="section-body-text">A full description with examples of the metrics collection containers is available <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/docs/metrics.adoc">here</a>.</div></div></div><div class="section2"><a id="_crunchy_collect/_requirements"></a><div class="section2-header"><div class="section2-number">6.2</div><div class="section2-title">Requirements</div></div><div class="section-body"><div class="section-body-text">Metrics are stored in the crunchy-prometheus container, which is the container that runs the Prometheus time series database. Metrics are pushed from crunchy-collect to the Prometheus promgateway found in the crunchy-promgateway container. Metrics dashboards are created using the Grafana web application which is found in the crunchy-grafana container.</div></div></div><div class="section2"><a id="_crunchy_collect/_environment_variables_4"></a><div class="section2-header"><div class="section2-number">6.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PROM_GATEWAY - The HTTP URL of the Prometheus Pushgateway into which the metrics will be pushed</li><li class="list-unordered">NODE_EXPORTER_URL - The HTTP URL of the node_exporter utility which collects host and OS level system metrics.</li><li class="list-unordered">POSTGRES_EXPORTER_URL - The HTTP URL of the postgres_exporter utility which collects PostgreSQL server metrics.</li><li class="list-unordered">DATA_SOURCE_NAME - The URL for the PostgreSQL server's data source name. This is <b>required</b> to be in the form of <b>postgresql://</b>.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_prometheus"></a><div class="section1-header"><div class="section1-number">7</div><div class="section1-title">crunchy-prometheus</div></div><div class="section-body"><div class="section2"><a id="_crunchy_prometheus/_description_2"></a><div class="section2-header"><div class="section2-number">7.1</div><div class="section2-title">Description</div></div><div class="section-body"><div class="section-body-text">The container crunchy-collect collects PostgreSQL metrics from the crunchy-postgres database container and pushes them to a Prometheus time series data store, which is located in this crunchy-prometheus container. Prometheus is a flexible, highly dimensional time series data model that stores data efficiently, where time series are defined through a metric name and set of key-value pairs.</div><div class="section-body-text">Prometheus is a multi-dimensional time series data model with an elastic query language. It is used in collaboration with Grafana in this metrics suite. Overall, it's reliable, manageable, and operationally simple for efficiently storing and analyzing data for large-scale environments. It targets the Promgateway as an endpoint for scraping metrics.</div><div class="section-body-text">A full description with examples of the metrics collection containers is available <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/docs/metrics.adoc">here</a>.</div><div class="section-body-text">The following port is exposed by the crunchy-prometheus container:</div><ul class="list-unordered"><li class="list-unordered">crunchy-prometheus:9090 - the Prometheus web user interface</li></ul></div></div><div class="section2"><a id="_crunchy_prometheus/_requirements_2"></a><div class="section2-header"><div class="section2-number">7.2</div><div class="section2-title">Requirements</div></div><div class="section-body"><div class="section-body-text">The crunchy-prometheus data in this example is stored in emptyDir volume types. To persist the data and Grafana templates in the long term, you will want to use a pvc based volume type as specified in <b>examples/openshift/metrics/run-pvc.json</b>.</div></div></div><div class="section2"><a id="_crunchy_prometheus/_environment_variables_5"></a><div class="section2-header"><div class="section2-number">7.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_promgateway"></a><div class="section1-header"><div class="section1-number">8</div><div class="section1-title">crunchy-promgateway</div></div><div class="section-body"><div class="section2"><a id="_crunchy_promgateway/_description_3"></a><div class="section2-header"><div class="section2-number">8.1</div><div class="section2-title">Description</div></div><div class="section-body"><div class="section-body-text">crunchy-promgateway is the Prometheus gateway into which the metrics will be pushed from crunchy-prometheus. The types of collected metrics as well as their status are viewable from the REST API on port 9091.</div><div class="section-body-text">A full description with examples of the metrics collection containers is available <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/docs/metrics.adoc">here</a>.</div><div class="section-body-text">The following port is exposed by the crunchy-promgateway container:</div><ul class="list-unordered"><li class="list-unordered">crunchy-promgateway:9091 - the Prometheus promgateway REST API</li></ul></div></div><div class="section2"><a id="_crunchy_promgateway/_environment_variables_6"></a><div class="section2-header"><div class="section2-number">8.2</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_grafana"></a><div class="section1-header"><div class="section1-number">9</div><div class="section1-title">crunchy-grafana</div></div><div class="section-body"><div class="section2"><a id="_crunchy_grafana/_description_4"></a><div class="section2-header"><div class="section2-number">9.1</div><div class="section2-title">Description</div></div><div class="section-body"><div class="section-body-text">Visual dashboards are created from the collected and stored data that crunchy-collect and crunchy-prometheus provides with the crunchy-grafana container, which hosts a web-based graphing dashboard called Grafana.</div><div class="section-body-text">Grafana is an open-source platform which can then apply the defined metrics and visualize information through various tools. It is extremely flexible with a powerful query and transformation language, producing beautiful and easily understandable graphics to analyze and monitor your data.</div><div class="section-body-text">A full description with examples of the metrics collection containers is available <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/docs/metrics.adoc">here</a>.</div><div class="section-body-text">The following port is exposed by the crunchy-grafana container:</div><ul class="list-unordered"><li class="list-unordered">crunchy-grafana:3000 - the Grafana web user interface</li></ul></div></div><div class="section2"><a id="_crunchy_grafana/_environment_variables_7"></a><div class="section2-header"><div class="section2-number">9.2</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_pgbadger"></a><div class="section1-header"><div class="section1-number">10</div><div class="section1-title">crunchy-pgbadger</div></div><div class="section-body"><div class="section-body-text">The crunchy-pgbadger container executes the pgbadger utility. A small http server is running on the container, when a request is made to:</div><pre class="code-block">http://<<ip address>>:10000/api/badgergenerate</pre><div class="section2"><a id="_crunchy_pgbadger/_environment_variables_8"></a><div class="section2-header"><div class="section2-number">10.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">BADGER_TARGET - only used in standalone mode to specify the name of the container, also used to find the location of the database log files in /pgdata/$BADGER_TARGET/pg_log/*.log</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_pgbadger/_features_2"></a><div class="section2-header"><div class="section2-number">10.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-pgbadger container:</div><ul class="list-unordered"><li class="list-unordered">basic invocation of pgbadger against the database log files</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_pgpool"></a><div class="section1-header"><div class="section1-number">11</div><div class="section1-title">crunchy-pgpool</div></div><div class="section-body"><div class="section-body-text">The crunchy-pgpool container executes the pgpool utility. Pgpool can be used to provide a smart PostgreSQL-aware proxy to a PostgreSQL cluster, both primary and replica, so that applications can only have to work with a single database connection.</div><div class="section-body-text">Postgres replicas are read-only whereas a primary is both read and write capable.</div><div class="section2"><a id="_crunchy_pgpool/_environment_variables_9"></a><div class="section2-header"><div class="section2-number">11.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PG_USERNAME - user to connect to PostgreSQL</li><li class="list-unordered">PG_PASSWORD - user password to connect to PostgreSQL</li><li class="list-unordered">PG_PRIMARY_SERVICE_NAME - database host to connect to for the primary node</li><li class="list-unordered">PG_REPLICA_SERVICE_NAME - database host to connect to for the replica node</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_pgpool/_features_3"></a><div class="section2-header"><div class="section2-number">11.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-pgpool container:</div><ul class="list-unordered"><li class="list-unordered">basic invocation of pgpool</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_watch"></a><div class="section1-header"><div class="section1-number">12</div><div class="section1-title">crunchy-watch</div></div><div class="section-body"><div class="section-body-text">crunchy-watch runs as a pod unto itself typically. The watch container essentially does a health check on a primary database container and performs a failover sequence if the primary is not reached.</div><div class="section-body-text">The watch container has access to a service account that is used inside the container to issue commands to OpenShift.</div><div class="section-body-text">In Kube 1.5, if a policy file is being used for securing down the Kube cluster, you could possibly need to add a policy to allow the pg-watcher service account access to the Kube API as mentioned here: <a href="https://kubernetes.io/docs/admin/authorization/abac/#a-quick-note-on-service-accounts">https://kubernetes.io/docs/admin/authorization/abac/#a-quick-note-on-service-accounts</a></div><div class="section-body-text">In Kube 1.6, an equivalent RBAC policy is also possibly required depending on your authorization/authentication configuration. See this link for details on the new RBAC policy mechanism: <a href="https://kubernetes.io/docs/admin/authorization/rbac/">https://kubernetes.io/docs/admin/authorization/rbac/</a></div><div class="section-body-text">For example, you can grant cluster-admin permissions on the pg-watcher service account, in the my-namespace namespace as follows:</div><pre class="code-block">kubectl create clusterrolebinding pgwatcher-view-binding --clusterrole=cluster-admin --serviceaccount=my-namespace:pg-watcher</pre><div class="section-body-text">A less wide open policy would be applied like this on Kube 1.6 rbac:</div><pre class="code-block">kubectl create rolebinding my-sa-binding --clusterrole=admin --serviceaccount=demo:pg-watcher --namespace=demo</pre><div class="admonition"><div class="note">NOTE:</div><div class="note-text">this kubectl command is only available in Kube 1.6, for prior Kube release such as 1.5 and the alpha RBAC, you will need to specify the role binding in a JSON/YAML file instead of using this command syntax above.</div></div><div class="section-body-text">You then reference the SA within the POD spec.</div><div class="section-body-text">The oc/docker/kubectl commands are included into the container from the host when the container image is built. These commands are used by the watch logic to interact with the replica containers.</div><div class="section-body-text">Starting with release 1.7.1 crunchy-watch source code is relocated to <a href="https://github.com/crunchydata/crunchy-watch">https://github.com/crunchydata/crunchy-watch</a></div><div class="section2"><a id="_crunchy_watch/_environment_variables_10"></a><div class="section2-header"><div class="section2-number">12.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">CRUNCHY_WATCH_HEALTHCHECK_INTERVAL - the time to sleep in seconds between checking on the primary</li><li class="list-unordered">CRUNCHY_WATCH_FAILOVER_WAIT - the time to sleep in seconds between triggering the failover and updating its label (default is 40 secs)</li><li class="list-unordered">PG_CONTAINER_NAME - if set, the name of the container to refer to when doing an <b>exec</b>, this is required if you have more than 1 container in your database pod</li><li class="list-unordered">CRUNCHY_WATCH_PRIMARY - the primary service name</li><li class="list-unordered">CRUNCHY_WATCH_REPLICA - the replica service name</li><li class="list-unordered">PG_PRIMARY_PORT - database port to use when checking the database</li><li class="list-unordered">CRUNCHY_WATCH_USERNAME - database user account to use when checking the database using pg_isready utility</li><li class="list-unordered">CRUNCHY_WATCH_DATABASE - database to use when checking the database using pg_isready</li><li class="list-unordered">REPLICA_TO_TRIGGER_LABEL - the pod name of a replica that you want to choose as the new primary in a failover; this will override the normal replica selection</li><li class="list-unordered">CRUNCHY_WATCH_PRE_HOOK - path to an executable file to run before failover is processed.</li><li class="list-unordered">CRUNCHY_WATCH_POST_HOOK - path to an executable file to run after failover is processed.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_watch/_logic"></a><div class="section2-header"><div class="section2-number">12.2</div><div class="section2-title">Logic</div></div><div class="section-body"><div class="section-body-text">The watch container will watch the primary, if the primary dies, then the watcher will:</div><ul class="list-unordered"><li class="list-unordered">create the trigger file on the replica that will become the new primary</li><li class="list-unordered">change the labels on the replica to be those of the primary</li><li class="list-unordered">start watching the new primary in case that falls over next</li><li class="list-unordered">look for replicas that have the metadata label value of <b>replicatype=trigger</b> to prefer the failover to. If found, it will use the first replica with that label; if not found, it will use the first replica it finds.</li></ul><div class="section-body-text">Example of looking for the failover replica:</div><pre class="code-block">oc get pod -l name=pg-replica-rc-dc
NAME                     READY     STATUS    RESTARTS   AGE
pg-replica-rc-dc           1/1       Running   2          16m
pg-replica-rc-dc-1-96qs8   1/1       Running   1          16m

oc get pod -l replicatype=trigger
NAME             READY     STATUS    RESTARTS   AGE
pg-replica-rc-dc   1/1       Running   2          16m</pre></div></div></div></div><div class="section1"><a id="_crunchy_vacuum"></a><div class="section1-header"><div class="section1-number">13</div><div class="section1-title">crunchy-vacuum</div></div><div class="section-body"><div class="section2"><a id="_crunchy_vacuum/_description_5"></a><div class="section2-header"><div class="section2-number">13.1</div><div class="section2-title">Description</div></div><div class="section-body"><div class="section-body-text">The crunchy-vacuum container allows you to perform a SQL VACUUM job against a PostgreSQL database container. You specify a database to vacuum using various environment variables which are listed below. It is possible to run different vacuum operations either manually or automatically through scheduling.</div><div class="section-body-text">The crunchy-vacuum image is executed, passed in the Postgres connection parameters to the single-primary PostgreSQL container. The type of vacuum performed is dictated by the environment variables passed into the job.</div></div></div><div class="section2"><a id="_crunchy_vacuum/_environment_variables_11"></a><div class="section2-header"><div class="section2-number">13.2</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><div class="section-body-text">The complete set of environment variables read by the crunchy-vacuum job include:</div><ul class="list-unordered"><li class="list-unordered">VAC_FULL - when set to true adds the FULL parameter to the VACUUM command</li><li class="list-unordered">VAC_TABLE - when set, allows you to specify a single table to vacuum, when not specified, the entire database tables are vacuumed</li><li class="list-unordered">JOB_HOST - required variable is the postgres host we connect to</li><li class="list-unordered">PG_USER - required variable is the postgres user we connect with</li><li class="list-unordered">PG_DATABASE - required variable is the postgres database we connect to</li><li class="list-unordered">PG_PASSWORD - required variable is the postgres user password we connect with</li><li class="list-unordered">PG_PORT - allows you to override the default value of 5432</li><li class="list-unordered">VAC_ANALYZE - when set to true adds the ANALYZE parameter to the VACUUM command</li><li class="list-unordered">VAC_VERBOSE - when set to true adds the VERBOSE parameter to the VACUUM command</li><li class="list-unordered">VAC_FREEZE - when set to true adds the FREEZE parameter to the VACUUM command</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_dba"></a><div class="section1-header"><div class="section1-number">14</div><div class="section1-title">crunchy-dba</div></div><div class="section-body"><div class="section-body-text">The crunchy-dba container implements a cron scheduler. The purpose of the crunchy-dba container is to offer a way to perform simple DBA tasks that occur on some form of schedule such as backup jobs or running a vacuum on a <b>single</b> Postgres database container.</div><div class="section-body-text">You can either run the crunchy-dba container as a single pod or include the container within a database pod.</div><div class="section-body-text">The crunchy-dba container makes use of a Service Account to perform the startup of scheduled jobs. The Kube Job type is used to execute the scheduled jobs with a Restart policy of Never.</div><div class="section2"><a id="_crunchy_dba/_environment_variables_12"></a><div class="section2-header"><div class="section2-number">14.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><div class="section-body-text">The following environment variables control the actions of crunchy-dba:</div><ul class="list-unordered"><li class="list-unordered">OSE_PROJECT - required, the OSE project name to log into</li><li class="list-unordered">JOB_HOST - required, the PostgreSQL container name the action will be taken against</li><li class="list-unordered">VAC_SCHEDULE - if set, this will start a vacuum job container. The setting value must be a valid cron expression as described below.</li><li class="list-unordered">BACKUP_SCHEDULE - if set, this will start a backup job container. The setting value must be a valid cron expression as described below.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul><div class="section-body-text">For a vacuum job, you are required to supply the following environment variables:</div><ul class="list-unordered"><li class="list-unordered">JOB_HOST</li><li class="list-unordered">PG_USER</li><li class="list-unordered">PG_PASSWORD</li><li class="list-unordered">PG_DATABASE - defaults to postgres when not specified</li><li class="list-unordered">PG_PORT - defaults to 5432 when not specified</li><li class="list-unordered">VAC_ANALYZE(optional) - defaults to true when not specified</li><li class="list-unordered">VAC_FULL(optional) - defaults to true when not specified</li><li class="list-unordered">VAC_VERBOSE(optional) - defaults to true when not specified</li><li class="list-unordered">VAC_FREEZE(optional) - defaults to false when not specified</li><li class="list-unordered">VAC_TABLE(optional) - defaults to all tables when not specified, or you can set this value to indicate a single table to vacuum</li></ul><div class="section-body-text">For a backup job, you are required to supply the following environment variables:</div><ul class="list-unordered"><li class="list-unordered">JOB_HOST</li><li class="list-unordered">PG_USER - database user used to perform the backup</li><li class="list-unordered">PG_PASSWORD - database user password used to perform the backup</li><li class="list-unordered">PG_PORT - port value used when connecting for a backup to the database</li><li class="list-unordered">BACKUP_PV_CAPACITY - a value like 1Gi is used to define the PV storage capacity</li><li class="list-unordered">BACKUP_PV_PATH - the NFS path used to build the PV</li><li class="list-unordered">BACKUP_PV_HOST - the NFS host used to build the PV</li><li class="list-unordered">BACKUP_PVC_STORAGE - a value like 75M means to allow 75 megabytes for the PVC used in performing the backup</li></ul></div></div><div class="section2"><a id="_crunchy_dba/_cron_expression_format"></a><div class="section2-header"><div class="section2-number">14.2</div><div class="section2-title">CRON Expression Format</div></div><div class="section-body"><div class="section-body-text">A cron expression represents a set of times, using 6 space-separated fields.</div><table class="table"><caption class="table-title">Table 1. Table Fields</caption><tr class="table-header-row"><th class="table-header-left">Field name</th><th class="table-header-left">Mandatory?</th><th class="table-header-left">Allowed values</th><th class="table-header-left">Allowed special characters</th></tr><tr class="table-row"><td class="table-data-left">Seconds</td><td class="table-data-left">Yes</td><td class="table-data-left">0-59</td><td class="table-data-left">* / , -</td></tr><tr class="table-row"><td class="table-data-left">Minutes</td><td class="table-data-left">Yes</td><td class="table-data-left">0-59</td><td class="table-data-left">* / , -</td></tr><tr class="table-row"><td class="table-data-left">Hours</td><td class="table-data-left">Yes</td><td class="table-data-left">0-23</td><td class="table-data-left">* / , -</td></tr><tr class="table-row"><td class="table-data-left">Day of month</td><td class="table-data-left">Yes</td><td class="table-data-left">1-31</td><td class="table-data-left">* / , - ?</td></tr><tr class="table-row"><td class="table-data-left">Month</td><td class="table-data-left">Yes</td><td class="table-data-left">1-12 or JAN-DEC</td><td class="table-data-left">* / , -</td></tr><tr class="table-row"><td class="table-data-left">Day of week</td><td class="table-data-left">Yes</td><td class="table-data-left">0-6 or SUN-SAT</td><td class="table-data-left">* / , - ?</td></tr></table><div class="admonition"><div class="note">NOTE:</div><div class="note-text">Month and Day-of-week field values are case insensitive. <q>SUN</q>, <q>Sun</q>, and <q>sun</q> are equally accepted.</div></div><div class="section3"><a id="_crunchy_dba/_cron_expression_format/_special_characters"></a><div class="section3-header"><div class="section3-number">14.2.1</div><div class="section3-title">Special Characters</div></div><div class="section-body"><div class="section4"><a id="_crunchy_dba/_cron_expression_format/_special_characters/_asterisk"></a><div class="section4-header"><div class="section4-number">14.2.1.1</div><div class="section4-title">Asterisk ( * )</div></div><div class="section-body"><div class="section-body-text">The asterisk indicates that the cron expression will match for all values of the field; e.g., using an asterisk in the 5th field (month) would indicate every month.</div></div></div><div class="section4"><a id="_crunchy_dba/_cron_expression_format/_special_characters/_slash"></a><div class="section4-header"><div class="section4-number">14.2.1.2</div><div class="section4-title">Slash ( / )</div></div><div class="section-body"><div class="section-body-text">Slashes are used to describe increments of ranges. For example 3-59/15 in the 1st field (minutes) would indicate the 3rd minute of the hour and every 15 minutes thereafter. The form <q>*\/...</q> is equivalent to the form <q>first-last/...</q>, that is, an increment over the largest possible range of the field. The form <q>N/...</q> is accepted as meaning <q>N-MAX/...</q>, that is, starting at N, use the increment until the end of that specific range. It does not wrap around.</div></div></div><div class="section4"><a id="_crunchy_dba/_cron_expression_format/_special_characters/_comma"></a><div class="section4-header"><div class="section4-number">14.2.1.3</div><div class="section4-title">Comma ( , )</div></div><div class="section-body"><div class="section-body-text">Commas are used to separate items of a list. For example, using <q>MON,WED,FRI</q> in the 5th field (day of week) would mean Mondays, Wednesdays and Fridays.</div></div></div><div class="section4"><a id="_crunchy_dba/_cron_expression_format/_special_characters/_hyphen"></a><div class="section4-header"><div class="section4-number">14.2.1.4</div><div class="section4-title">Hyphen ( - )</div></div><div class="section-body"><div class="section-body-text">Hyphens are used to define ranges. For example, 9-17 would indicate every hour between 9am and 5pm inclusive.</div></div></div><div class="section4"><a id="_crunchy_dba/_cron_expression_format/_special_characters/_question_mark"></a><div class="section4-header"><div class="section4-number">14.2.1.5</div><div class="section4-title">Question mark ( ? )</div></div><div class="section-body"><div class="section-body-text">Question mark may be used instead of <i>*</i> for leaving either day-of-month or day-of-week blank.</div></div></div></div></div><div class="section3"><a id="_crunchy_dba/_cron_expression_format/_predefined_schedules"></a><div class="section3-header"><div class="section3-number">14.2.2</div><div class="section3-title">Predefined schedules</div></div><div class="section-body"><div class="section-body-text">You may use one of several pre-defined schedules in place of a cron expression.</div><table class="table"><caption class="table-title">Table 2. Table Predefined Schedules</caption><tr class="table-header-row"><th class="table-header-left">Entry</th><th class="table-header-left">Description</th><th class="table-header-left">Equivalent To</th></tr><tr class="table-row"><td class="table-data-left">@yearly (or @annually)</td><td class="table-data-left">Run once a year, midnight, Jan. 1st</td><td class="table-data-left">0 0 0 1 1 *</td></tr><tr class="table-row"><td class="table-data-left">@monthly</td><td class="table-data-left">Run once a month, midnight, first of month</td><td class="table-data-left">0 0 0 1 * *</td></tr><tr class="table-row"><td class="table-data-left">@weekly</td><td class="table-data-left">Run once a week, midnight on Sunday</td><td class="table-data-left">0 0 0 * * 0</td></tr><tr class="table-row"><td class="table-data-left">@daily (or @midnight)</td><td class="table-data-left">Run once a day, midnight</td><td class="table-data-left">0 0 0 * * *</td></tr><tr class="table-row"><td class="table-data-left">@hourly</td><td class="table-data-left">Run once an hour, beginning of hour</td><td class="table-data-left">0 0 * * * *</td></tr></table></div></div><div class="section3"><a id="_crunchy_dba/_cron_expression_format/_intervals"></a><div class="section3-header"><div class="section3-number">14.2.3</div><div class="section3-title">Intervals</div></div><div class="section-body"><div class="section-body-text">You may also schedule a job to execute at fixed intervals. This is supported by formatting the cron spec like this:</div><pre class="code-block">@every <duration></pre><div class="section-body-text">where <q>duration</q> is a string accepted by time.ParseDuration (<a href="http://golang.org/pkg/time/#ParseDuration">http://golang.org/pkg/time/#ParseDuration</a>).</div><div class="section-body-text">For example, <q>@every 1h30m10s</q> would indicate a schedule that activates every 1 hour, 30 minutes, 10 seconds.</div><div class="admonition"><div class="note">NOTE:</div><div class="note-text">The interval does not take the job runtime into account. For example, if a job takes 3 minutes to run, and it is scheduled to run every 5 minutes, it will have only 2 minutes of idle time between each run.</div></div></div></div><div class="section3"><a id="_crunchy_dba/_cron_expression_format/_time_zones"></a><div class="section3-header"><div class="section3-number">14.2.4</div><div class="section3-title">Time zones</div></div><div class="section-body"><div class="section-body-text">All interpretation and scheduling is done in the machines local time zone (as provided by the Go time package (<a href="http://www.golang.org/pkg/time">http://www.golang.org/pkg/time</a>). Be aware that jobs scheduled during daylight-savings leap-ahead transitions will not be run!</div></div></div></div></div></div></div><div class="section1"><a id="_crunchy_pgbouncer"></a><div class="section1-header"><div class="section1-number">15</div><div class="section1-title">crunchy-pgbouncer</div></div><div class="section-body"><div class="section-body-text">The crunchy-ppgbouncer container executes the Postgres pgbouncer utility and a failover watch script.</div><div class="section2"><a id="_crunchy_pgbouncer/_environment_variables_13"></a><div class="section2-header"><div class="section2-number">15.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">FAILOVER - when set, the container will look at the configured primary database and if it can't reach it, will perform a failover to a configured replica database</li><li class="list-unordered">OSE_PROJECT - when set, indicates you are running under OSE</li><li class="list-unordered">PG_PRIMARY_USER - the value to use for the user ID created as primaryuser. The <b>primaryuser</b> has super user privileges.</li><li class="list-unordered">SLEEP_TIME - time in seconds to sleep when polling the primary</li><li class="list-unordered">PG_DATABASE - the database to use when checking the readiness of the primary</li><li class="list-unordered">PG_PRIMARY_PORT - the PostgreSQL port to use when checking the primary</li><li class="list-unordered">PG_PRIMARY_SERVICE - the name of the primary database container</li><li class="list-unordered">PG_REPLICA_SERVICE - the name of the replica database container, this is used to know which container to trigger the failover on</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_pgbouncer/_features_4"></a><div class="section2-header"><div class="section2-number">15.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-postgres container:</div><ul class="list-unordered"><li class="list-unordered">mount pgbouncer user.txt and pgbouncer.ini config files via /pgconf volume</li><li class="list-unordered">ability to cause a failover on a configured replica container</li><li class="list-unordered">ability to rewrite the pgbouncer.ini config file and reload pgbouncer after a failover</li></ul></div></div><div class="section2"><a id="_crunchy_pgbouncer/_restrictions"></a><div class="section2-header"><div class="section2-number">15.3</div><div class="section2-title">Restrictions</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">the name of the primary database in the pgbouncer.ini file is required to be <b>primary</b></li><li class="list-unordered">for configuration, has to have users.txt and pgbouncer.ini files mounted in /pgconf</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_backrest_restore"></a><div class="section1-header"><div class="section1-number">16</div><div class="section1-title">crunchy-backrest-restore</div></div><div class="section-body"><div class="section-body-text">The crunchy-backrest-restore container executes the pgbackrest utility, allowing FULL and DELTA restore capability. See the pgbackrest guide for more details. <a href="https://github.com/pgbackrest/pgbackrest">https://github.com/pgbackrest/pgbackrest</a></div><div class="section2"><a id="_crunchy_backrest_restore/_environment_variables_14"></a><div class="section2-header"><div class="section2-number">16.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">STANZA - required - must be set to the desired stanza for restore</li><li class="list-unordered">DELTA - when set, will add the --delta option to the restore. The delta option allows pgBackRest to automatically determine which files in the database cluster directory can be preserved and which ones need to be restored from the backup - it also removes files not present in the backup manifest so it will dispose of divergent changes.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_backrest_restore/_features_5"></a><div class="section2-header"><div class="section2-number">16.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-backrest-restore container:</div><ul class="list-unordered"><li class="list-unordered">mount pgbackrest.conf config file via /pgconf volume</li><li class="list-unordered">mount the /backrestrepo for access to pgbackrest archives</li></ul></div></div><div class="section2"><a id="_crunchy_backrest_restore/_restrictions_2"></a><div class="section2-header"><div class="section2-number">16.3</div><div class="section2-title">Restrictions</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">for configuration, has to have pgbackrest.conf files mounted in /pgconf</li><li class="list-unordered">must have valid pgbackrest archive directory mounted in /backrestrepo</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_pgadmin4"></a><div class="section1-header"><div class="section1-number">17</div><div class="section1-title">crunchy-pgadmin4</div></div><div class="section-body"><div class="section-body-text">The crunchy-ppgadmin4 container executes the pgadmin4 web application.</div><div class="section-body-text">The pgadmin4 project is found at the following location: <a href="https://www.pgadmin.org/">https://www.pgadmin.org/</a></div><div class="section-body-text">pgadmin4 provides a web user interface to PostgreSQL databases. A sample screenshot is below:</div><pre class="code-block">|</pre><div class="section2"><a id="_crunchy_pgadmin4/_environment_variables_15"></a><div class="section2-header"><div class="section2-number">17.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PGADMIN_SETUP_EMAIL - required, set this value to the email address used for pgAdmin4 login.</li><li class="list-unordered">PGADMIN_SETUP_PASSWORD - required, set this value to a password used for pgAdmin4 login. This should be a strong password.</li><li class="list-unordered">SERVER_PORT - default is 5050, set this value to a change the port pgAdmin4 listens on.</li><li class="list-unordered">ENABLE_TLS - default is false, set this value to true to enable HTTPS on the pgAdmin4 container. This requires a <b>server.key</b> and <b>server.crt</b> to be mounted on the <b>/certs</b> directory.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_pgadmin4/_features_6"></a><div class="section2-header"><div class="section2-number">17.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-pgadmin4 container:</div><ul class="list-unordered"><li class="list-unordered">expose port (5050 by default) which is the web server port</li><li class="list-unordered">mount a certificate and key to the <b>/certs</b> directory and set <b>ENABLE_TLS</b> to true to activate HTTPS mode.</li><li class="list-unordered">Set username and password for login via environment variables.</li></ul></div></div><div class="section2"><a id="_crunchy_pgadmin4/_restrictions_3"></a><div class="section2-header"><div class="section2-number">17.3</div><div class="section2-title">Restrictions</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">N/A</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_restore"></a><div class="section1-header"><div class="section1-number">18</div><div class="section1-title">crunchy-restore</div></div><div class="section-body"><div class="section-body-text">The restore image provides a means of performing a restore of a dump from pg_dump or pg_dumpall via psql or pg_restore to a Postgres container database.</div><div class="section2"><a id="_crunchy_restore/_dump_file_input_location"></a><div class="section2-header"><div class="section2-number">18.1</div><div class="section2-title">Dump-file Input Location</div></div><div class="section-body"><div class="section-body-text">As the input files for crunchy-restore, files generated by crunchy-dump are retrieved in a mounted backup volume location, using the database host name plus <b>-dumps</b> as a sub-directory, then followed by a unique backup directory based upon a date/timestamp. It is left to the user to restore database dump archives in this current version of the container.</div></div></div><div class="section2"><a id="_crunchy_restore/_dependencies_3"></a><div class="section2-header"><div class="section2-number">18.2</div><div class="section2-title">Dependencies</div></div><div class="section-body"><div class="section-body-text">The container is meant to be using a NFS or similar network file system to retrieve database dumps to be restored via psql or pg_restore.</div></div></div><div class="section2"><a id="_crunchy_restore/_environment_variables_16"></a><div class="section2-header"><div class="section2-number">18.3</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><div class="section3"><a id="_crunchy_restore/_environment_variables_16/_required_args_2"></a><div class="section3-header"><div class="section3-number">18.3.1</div><div class="section3-title">REQUIRED ARGS</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">/pgdata is a volume that gets mapped into this container</li><li class="list-unordered">PGRESTORE_DB database we are connecting and restoring to</li><li class="list-unordered">PGRESTORE_HOST host we are connecting to</li><li class="list-unordered">PGRESTORE_PASS pg user password we are connecting with</li><li class="list-unordered">PGRESTORE_PORT pg port we are connecting to</li><li class="list-unordered">PGRESTORE_USER pg user we are connecting with</li><li class="list-unordered">PGRESTORE_RESTOREFILE which filename (only) to use as the input source for pg_restore</li><li class="list-unordered">PGRESTORE_VOLUMEPATH which path (only) to use as the input source for pg_restore NOTE: As the crunchy-dump container dumps files to a date/time-stamped subdirectory, the PGRESTORE_VOLUMEPATH variable will need to be updated to the correct location in the pgrestore-job.json file for each invocation.</li></ul></div></div><div class="section3"><a id="_crunchy_restore/_environment_variables_16/_optional_extended_args_2"></a><div class="section3-header"><div class="section3-number">18.3.2</div><div class="section3-title">OPTIONAL/EXTENDED ARGS</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PGRESTORE_CLEAN option to cleanly drop database objects prior to recreating them.</li><li class="list-unordered">PGRESTORE_CREATE option to begin pg_restore by creating the datbase before restoring into it.</li><li class="list-unordered">PGRESTORE_DATAONLY option to restore only the data (no schema).</li><li class="list-unordered">PGRESTORE_DISABLETRIGGERS option to disable triggers when running a data-only restore</li><li class="list-unordered">PGRESTORE_ENABLEROWSECURITY option to allow restoring content of tables with RLS turned on.</li><li class="list-unordered">PGRESTORE_EXCLUDEPRIVILEGES option to exclude commands which specify access privileges from the restore.</li><li class="list-unordered">PGRESTORE_EXITONERROR option to exit if an error occurs when sending SQL commands to the Postgres DB instance (default: false).</li><li class="list-unordered">PGRESTORE_FORMAT option to select the output format (plain (p), custom (c), directory (d) and tar (t))</li><li class="list-unordered">PGRESTORE_IFEXISTS option to use conditional commands (IF EXISTS clause) to the restore process when cleaning database objects.</li><li class="list-unordered">PGRESTORE_INDEX option to restore definition of named index only.</li><li class="list-unordered">PGRESTORE_LIST option to list the contents of the archive.</li><li class="list-unordered">PGRESTORE_LISTFILE option to restore only the archived elements that are listed in the named list file.</li><li class="list-unordered">PGRESTORE_NODATAFORFAILEDTABLES option to skip data restoration if the creation command for the table failed.</li><li class="list-unordered">PGRESTORE_NOOWNER option to exclude commands that set table ownership from the restore.</li><li class="list-unordered">PGRESTORE_NOSECURITYLABELS option to exclude commands to restore security labels.</li><li class="list-unordered">PGRESTORE_NOTABLESPACES option to exclude tablespaces from the restore - all objects are created in the default namespace.</li><li class="list-unordered">PGRESTORE_NUMJOBS option to specify the number of jobs to run the restore in parallel.</li><li class="list-unordered">PGRESTORE_ROLE specifies a role name to be used to perform the restore. This option causes pg_restore to issue a SET ROLE rolename command after connecting to the database. It is useful when the authenticated user (specified by -U) lacks privileges needed by pg_restore, but can switch to a role with the required rights.</li><li class="list-unordered">PGRESTORE_SCHEMA option to restore only objects that are in the named schema.</li><li class="list-unordered">PGRESTORE_SCHEMAONLY option to restore the schema information only (no data).</li><li class="list-unordered">PGRESTORE_SECTION option to restore only the named section; the section name can be pre-data, data, or post-data.</li><li class="list-unordered">PGRESTORE_SINGLETRANSACTION option to execute rhe restore as a single transaction (all commands wrapped in a BEGIN/COMMIT block); this ensures that all commands complete successfully or no changes are applied.</li><li class="list-unordered">PGRESTORE_SUPERUSER option to specify the superuser name to use when disabling triggers.</li><li class="list-unordered">PGRESTORE_TABLE option to restore only the definition and/or data of the named table.</li><li class="list-unordered">PGRESTORE_TRIGGER option to restore only the the named trigger.</li><li class="list-unordered">PGRESTORE_USESESSIONAUTH option for pg_restore to output SQL-standard SET SESSION AUTHORIZATION commands instead of ALTER OWNER commands to determine object ownership.</li><li class="list-unordered">PGRESTORE_VERBOSE option to specify verbose mode to output detailed object comments and start/stop times to the output from pg_restore; as well as progress messages to standard error (STDERR).</li><li class="list-unordered">PGRESTORE_VERSION option to output the pg_restore version and exit.</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div></div></div></div></div><div class="section1"><a id="_crunchy_upgrade"></a><div class="section1-header"><div class="section1-number">19</div><div class="section1-title">crunchy-upgrade</div></div><div class="section-body"><div class="section-body-text">The crunchy-upgrade container contains both the 9.5/9.6 and 9.6/10 Postgres packages in order to perform a pg_upgrade from 9.5 to 9.6 or 9.6 to 10 versions.</div><div class="section2"><a id="_crunchy_upgrade/_environment_variables_17"></a><div class="section2-header"><div class="section2-number">19.1</div><div class="section2-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">OLD_DATABASE_NAME - required, refers to the database (pod) name that we want to convert</li><li class="list-unordered">NEW_DATABASE_NAME - required, refers to the database (pod) name that we give to the upgraded database</li><li class="list-unordered">OLD_VERSION - required, the Postgres version of the old database</li><li class="list-unordered">NEW_VERSION - required, the Postgres version of the new database</li><li class="list-unordered">PG_LOCALE - if set, the locale you want to create the database with, if not set, the default locale is used</li><li class="list-unordered">CHECKSUMS - if set, this value is used to enable the <b>--data-checksums</b> option when initdb is executed at initialization, if not set, the default is to <b>not</b> enable data checksums</li><li class="list-unordered">XLOGDIR - if set, initdb will use the specified directory for WAL</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul></div></div><div class="section2"><a id="_crunchy_upgrade/_features_7"></a><div class="section2-header"><div class="section2-number">19.2</div><div class="section2-title">Features</div></div><div class="section-body"><div class="section-body-text">The following features are supported by the crunchy-upgrade container:</div><ul class="list-unordered"><li class="list-unordered">supports only a pg_upgrade of the Postgres database</li><li class="list-unordered">doesn't alter the old database files</li><li class="list-unordered">creates the new database directory</li></ul></div></div><div class="section2"><a id="_crunchy_upgrade/_restrictions_4"></a><div class="section2-header"><div class="section2-number">19.3</div><div class="section2-title">Restrictions</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">does NOT support a postgis upgrade currently</li><li class="list-unordered">all environment variables are required</li><li class="list-unordered">supports upgrades from 9.5/9.6 to 10</li></ul></div></div></div></div><div class="section1"><a id="_crunchy_sim"></a><div class="section1-header"><div class="section1-number">20</div><div class="section1-title">crunchy-sim</div></div><div class="section-body"><div class="section-body-text">The crunchy-sim container is a simple traffic simulator for PostgreSQL</div></div></div><div class="section1"><a id="_environment_variables_18"></a><div class="section1-header"><div class="section1-number">21</div><div class="section1-title">Environment Variables</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">PGSIM_HOST - required, the PostgreSQL host address</li><li class="list-unordered">PGSIM_PORT - required, the PostgreSQL host port</li><li class="list-unordered">PGSIM_USERNAME - required, the PostgreSQL username</li><li class="list-unordered">PGSIM_PASSWORD - required, the PostgreSQL password</li><li class="list-unordered">PGSIM_DATABASE - required, the database to connect</li><li class="list-unordered">PGSIM_INTERVAL - required, The units of the simulation interval</li><li class="list-unordered">PGSIM_MININTERVAL - required, the minimum interval value</li><li class="list-unordered">PGSIM_MAXINTERVAL - requited, the maximum interval value</li><li class="list-unordered">DEBUG - default is false, set this value to true to debugging in logs. Note: this mode can reveal secrets in logs.</li></ul><div class="section-body-text">Valid values for PGSIM_INTERVAL are as follows:</div><ul class="list-unordered"><li class="list-unordered">millisecond</li><li class="list-unordered">second</li><li class="list-unordered">minute</li></ul></div></div><div class="section1"><a id="_features_8"></a><div class="section1-header"><div class="section1-number">22</div><div class="section1-title">Features</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">Creates a single connection to PostgreSQL and will execute queries over a specified interval range.</li><li class="list-unordered">Queries are specified through a simple YAML file. Each query is a name-value pair and can span multiple lines by utilizing scalar notation (<q>|</q> or <q>></q>) as defined by the YAML spec.</li><li class="list-unordered">Queries are randomly chosen for execution.</li></ul></div></div><div class="section1"><a id="_restrictions_5"></a><div class="section1-header"><div class="section1-number">23</div><div class="section1-title">Restrictions</div></div><div class="section-body"><ul class="list-unordered"><li class="list-unordered">Only one connection is created for all queries.</li></ul></div></div><div class="section1"><a id="_legal_notices"></a><div class="section1-header"><div class="section1-number">24</div><div class="section1-title">Legal Notices</div></div><div class="section-body"><div class="section-body-text">Copyright &copy; 2018 Crunchy Data Solutions, Inc.</div><div class="section-body-text">CRUNCHY DATA SOLUTIONS, INC. PROVIDES THIS GUIDE <q>AS IS</q> WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</div><div class="section-body-text">Crunchy, Crunchy Data Solutions, Inc. and the Crunchy Hippo Logo are trademarks of Crunchy Data Solutions, Inc.</div></div></div><div class="page-footer text-center">Prepared by Crunchy Data Solutions, Inc. &mdash; March 22, 2018</div></div></div></div></body></html>